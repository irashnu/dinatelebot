# ๐ ุฑุงูููุง ฺฉุงูู ุฑุงูโุงูุฏุงุฒ ุฑุจุงุช ุชุฑุฌูู ุชูฺฏุฑุงู (Telegram Translator Bot)

ุงู ูพุฑูฺู ฺฉ **ุฑุจุงุช ุชูฺฏุฑุงู ุณุงุฏู ู ุขููุฒุด** ุงุณุช ฺฉู ูพุงูโูุง ฺฉุงุฑุจุฑ ุฑุง ุงุฒ ฺฉ ุฒุจุงู ุจู ุฒุจุงู ุฏฺฏุฑ ุชุฑุฌูู ูโฺฉูุฏ ู ุชูุธูุงุช ุฒุจุงู ูุฑ ฺฉุงุฑุจุฑ ุฑุง ุฏุฑ **ุฏุชุงุจุณ SQLite** ุฐุฎุฑู ูโฺฉูุฏ.

ุงู README ุทูุฑ ููุดุชู ุดุฏู ฺฉู **ุญุช ุงฺฏุฑ ูฺ ุชุฌุฑุจูโุง ูุฏุงุดุชู ุจุงุดุฏ**ุ ุจุชูุงูุฏ ููุทู ูพุฑูฺูุ ุณุงุฎุช ุฏุชุงุจุณ ู ูุญูู ุงุฌุฑุง ุฑุจุงุช ุฑุง ฺฉุงูู ูุชูุฌู ุดูุฏ.

---

## ๐งฉ ูุนุฑู ฺฉู ูพุฑูฺู

ุฑุจุงุช ุงุฒ ุฏู ุจุฎุด ุงุตู ุชุดฺฉู ุดุฏู ุงุณุช:

1. **ูุงู ุฑุจุงุช ุชูฺฏุฑุงู**

   * ุฏุฑุงูุช ูพุงูโูุง
   * ููุงุด ุฏฺฉููโูุง ุงูุชุฎุงุจ ุฒุจุงู
   * ุชุฑุฌูู ูุชู ุจุง Google Translate

2. **ูุงู ุฏุชุงุจุณ (SQLite)**

   * ุฐุฎุฑู ุงุทูุงุนุงุช ูุฑ ฺฉุงุฑุจุฑ
   * ูฺฏูุฏุงุฑ ุฒุจุงู ูุจุฏุฃ ู ููุตุฏ

---

## ๐ ุณุงุฎุชุงุฑ ูุงูโูุง

```text
project/
โ
โโโ bot.py        # ููุทู ุงุตู ุฑุจุงุช ุชูฺฏุฑุงู
โโโ db.py         # ูุฏุฑุช ุฏุชุงุจุณ SQLite
โโโ db.db         # ูุงู ุฏุชุงุจุณ (ุจุนุฏ ุงุฒ ุงุฌุฑุง ุณุงุฎุชู ูโุดูุฏ)
โโโ README.md     # ููู ูุงู
```

---

## โ๏ธ ูพุดโูุงุฒูุง

ูุจู ุงุฒ ุงุฌุฑุงุ ุจุงุฏ ูพฺฉุฌโูุง ุฒุฑ ุฑุง ูุตุจ ฺฉูุฏ:

```bash
pip install python-telegram-bot googletrans==4.0.0rc1 aiosqlite
```

ููฺูู ูุงุฒ ุจู:

* Python 3.9+
* ุณุงุฎุช ุฑุจุงุช ุชูฺฏุฑุงู ุงุฒ ุทุฑู **BotFather**

---

## ๐ ุชูุธู ุชูฺฉู ุชูฺฏุฑุงู

ุฏุฑ ูุงู `bot.py` ููุฏุงุฑ `TOKEN` ุฑุง ุจุง ุชูฺฉู ุฑุจุงุช ุฎูุฏุชุงู ุฌุงฺฏุฒู ฺฉูุฏ:

```python
TOKEN = 'YOUR_TELEGRAM_BOT_TOKEN'
```

> โ๏ธ **ูุดุฏุงุฑ:**
> ูุฑฺฏุฒ ุชูฺฉู ุฑุจุงุช ุฑุง ุฏุฑ ูพุฑูฺูโูุง ุนููู (GitHub) ููุชุดุฑ ูฺฉูุฏ.

---

## ๐๏ธ ุขููุฒุด ุณุงุฎุช ุฏุชุงุจุณ SQLite

### 1๏ธโฃ ุฏุชุงุจุณ ฺุณุชุ

SQLite ฺฉ ุฏุชุงุจุณ ุณุจฺฉ ู ูุงูโูุญูุฑ ุงุณุช.
ุนู **ฺฉู ุฏุชุงุจุณ ููุท ฺฉ ูุงู (`db.db`) ุงุณุช** ู ูุงุฒ ุจู ูุตุจ ุณุฑูุณ ุฌุฏุงฺฏุงูู ูุฏุงุฑุฏ.

---

### 2๏ธโฃ ุฌุฏูู ฺฉุงุฑุจุฑุงู (Users Table)

ูุง ููุท ฺฉ ุฌุฏูู ุฏุงุฑู ุจู ูุงู `tbl_users` ฺฉู ุงุทูุงุนุงุช ฺฉุงุฑุจุฑุงู ุชูฺฏุฑุงู ุฑุง ูฺฏู ูโุฏุงุฑุฏ.

#### ุณุงุฎุชุงุฑ ุฌุฏูู:

| ุณุชูู      | ููุน  | ุชูุถุญ                      |
| --------- | ---- | -------------------------- |
| chat_id   | TEXT | ุขุฏ ฺฉุชุง ฺฉุงุฑุจุฑ ุฏุฑ ุชูฺฏุฑุงู |
| dest_lang | TEXT | ุฒุจุงู ููุตุฏ ุชุฑุฌูู            |
| src_lang  | TEXT | ุฒุจุงู ูุจุฏุฃ ุชุฑุฌูู            |

---

### 3๏ธโฃ ุฏุณุชูุฑ SQL ุณุงุฎุช ุฌุฏูู

ุงฺฏุฑ ุจุฎูุงูุฏ ุฏุณุช ุฏุชุงุจุณ ุฑุง ุจุณุงุฒุฏ:

```sql
CREATE TABLE tbl_users (
    chat_id TEXT PRIMARY KEY,
    dest_lang TEXT NOT NULL,
    src_lang TEXT NOT NULL
);
```

ุงูุง ุฏุฑ ุงู ูพุฑูฺู **ูุงุฒ ูุณุช ุฏุณุช ุจุณุงุฒุฏ**ุ ฺูู ุจุง ุงููู ุงุฌุฑุง ุฑุจุงุช ู ุงููู ฺฉุงุฑุจุฑุ ุฑฺฉูุฑุฏ ุณุงุฎุชู ูโุดูุฏ.

---

## ๐ง ุชูุถุญ ูุงู db.py (ูุฏุฑุช ุฏุชุงุจุณ)

### ๐ ูุชุบุฑูุง ุงุตู

```python
DB_NAME = 'db.db'
TABLE_USERS = 'tbl_users'
```

* `DB_NAME` ูุงู ูุงู ุฏุชุงุจุณ
* `TABLE_USERS` ูุงู ุฌุฏูู ฺฉุงุฑุจุฑุงู

---

### ๐ ุชุงุจุน get_or_create_user

ุงู ุชุงุจุน:

* ุงฺฏุฑ ฺฉุงุฑุจุฑ ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏ โ ุงุทูุงุนุงุชุด ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ
* ุงฺฏุฑ ูุฌูุฏ ูุฏุงุดุชู ุจุงุดุฏ โ ฺฉุงุฑุจุฑ ุฌุฏุฏ ูโุณุงุฒุฏ

```python
async def get_or_create_user(chat_id, dest_lang='en', src_lang='fa'):
```

ููุทู ุชุงุจุน:

1. ุงุชุตุงู async ุจู ุฏุชุงุจุณ
2. ุฌุณุชุฌู ฺฉุงุฑุจุฑ ุจุง `chat_id`
3. ุงฺฏุฑ ูพุฏุง ุดุฏ โ ุฎูุงูุฏู ุงุทูุงุนุงุช
4. ุงฺฏุฑ ูุจูุฏ โ ุณุงุฎุช ุฑฺฉูุฑุฏ ุฌุฏุฏ
5. ุจุงุฒฺฏุฑุฏุงูุฏู ุงุทูุงุนุงุช ุจู ุตูุฑุช ุฏฺฉุดูุฑ

---

### ๐ ุชุงุจุน update_user_langs

ุงู ุชุงุจุน ุฒุจุงูโูุง ฺฉุงุฑุจุฑ ุฑุง ุชุบุฑ ูโุฏูุฏ:

```python
async def update_user_langs(chat_id, dest_lang, src_lang):
```

ูุฑุงุญู:

1. ุงุฌุฑุง ุฏุณุชูุฑ `UPDATE`
2. ุฐุฎุฑู ุชุบุฑุงุช ุจุง `commit`
3. ุฎูุงูุฏู ุฏูุจุงุฑู ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ

---

## ๐ค ุชูุถุญ ูุงู bot.py (ุฑุจุงุช ุชูฺฏุฑุงู)

### ๐ keyboard ุงูุชุฎุงุจ ุฒุจุงู

```python
def language_keyboard(prefix):
```

ุงู ุชุงุจุน:

* ุฏฺฉููโูุง ุดุดูโุง (InlineKeyboard)
* ุจุฑุง ุงูุชุฎุงุจ ุฒุจุงู ูุจุฏุฃ ุง ููุตุฏ

ููููู callback:

```text
src:fa
dst:en
```

---

### ๐ ูุฏุฑุช ฺฉูฺฉ ุฏฺฉููโูุง

```python
async def update_languages(update, context):
```

ุงู ุชุงุจุน ุฒูุงู ุงุฌุฑุง ูโุดูุฏ ฺฉู ฺฉุงุฑุจุฑ ุฑู ุฏฺฉููโูุง ฺฉูฺฉ ฺฉูุฏ:

* `update_lang` โ ุดุฑูุน ุงูุชุฎุงุจ ุฒุจุงู
* `src:xx` โ ุงูุชุฎุงุจ ุฒุจุงู ูุจุฏุฃ
* `dst:xx` โ ุงูุชุฎุงุจ ุฒุจุงู ููุตุฏ + ุฐุฎุฑู ุฏุฑ ุฏุชุงุจุณ

---

### ๐ ุชุฑุฌูู ูพุงูโูุง

```python
async def translate(update, context):
```

ูุฑุงุญู:

1. ฺฏุฑูุชู ุชูุธูุงุช ฺฉุงุฑุจุฑ ุงุฒ ุฏุชุงุจุณ
2. ุฏุฑุงูุช ูุชู ูพุงู
3. ุชุฑุฌูู ุจุง googletrans
4. ุงุฑุณุงู ูุชุฌู ุจู ฺฉุงุฑุจุฑ

---

### ๐ ุฏุณุชูุฑ /start

```python
async def start(update, context):
```

* ุณุงุฎุช ฺฉุงุฑุจุฑ ุฏุฑ ุฏุชุงุจุณ (ุงฺฏุฑ ูุฌูุฏ ูุฏุงุดุชู ุจุงุดุฏ)
* ููุงุด ููู ุงุตู

---

## โถ๏ธ ุงุฌุฑุง ุฑุจุงุช

ุจุฑุง ุงุฌุฑุง ุฑุจุงุช:

```bash
python bot.py
```

